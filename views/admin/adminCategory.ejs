<%-include("../adminpartials/admin_navbar.ejs")%>
    <div class="container mt-5">
        <div class="row" style="background-color: rgb(255, 255, 255);">
            <div class="head col-md-10 offset-md-1 d-flex justify-content-between align-items-center">
                <h1>Categories</h1>
                <button type="button" class="btn btn-outline-success btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Add new category
                  </button>
            </div>
        </div>
        <div class="row d-flex flex-row align-items-center justify-content-center">
            <div class="table-responsive col-8">
                <table class="table text-center my-4">
                    <thead>
                        <tr>
                            <th class="text-center text-dark">Nos</th>
                            <th class="text-center text-dark">Category</th>
                            <th class="text-center text-dark">Options</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="align-middle">
                            <td>
                                1
                            </td>
                            <td>
                                Ultrabook
                            </td>
                            <td>
                                <a href="" class="text-success"><i
                                    class="fas fa-edit fa-lg mx-1"></i></a>
                            <a href="" class="text-danger"><i
                                    class="fas fa-trash fa-lg mx-1"></i></a>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                1
                            </td>
                            <td>
                                Ultrabook
                            </td>
                            <td>
                                <a href="" class="text-success"><i
                                    class="fas fa-edit fa-lg mx-1"></i></a>
                            <a href="" class="text-danger"><i
                                    class="fas fa-trash fa-lg mx-1"></i></a>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                1
                            </td>
                            <td>
                                Ultrabook
                            </td>
                            <td>
                                <a href="" class="text-success"><i
                                    class="fas fa-edit fa-lg mx-1"></i></a>
                            <a href="" class="text-danger"><i
                                    class="fas fa-trash fa-lg mx-1"></i></a>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                1
                            </td>
                            <td>
                                Ultrabook
                            </td>
                            <td>
                                <a href="" class="text-success"><i
                                    class="fas fa-edit fa-lg mx-1"></i></a>
                            <a href="" class="text-danger"><i
                                    class="fas fa-trash fa-lg mx-1"></i></a>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                1
                            </td>
                            <td>
                                Ultrabook
                            </td>
                            <td>
                                <a href="" class="text-success"><i
                                    class="fas fa-edit fa-lg mx-1"></i></a>
                            <a href="" class="text-danger"><i
                                    class="fas fa-trash fa-lg mx-1"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add New Category</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="categoryName" class="form-label">Category Name</label>
              <input type="text" class="form-control" id="categoryName" name="categoryName">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" id="save" class="btn btn-primary">Save</button>
        </div>
      </div>
    </div>
  </div>



        <script>
            //For alert message
            setTimeout(function () {
                const alert = document.querySelector('.alert');
                if (alert) {
                    alert.style.display = 'none';
                }
            }, 3000);

            //to send the categoryname to adminController
            document.getElementById("save").addEventListener("click", async function() {
            const categoryName = document.getElementById("categoryName").value;

            try {
                const response = await fetch("/admin/addCategory", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ categoryName: categoryName })
                });

                if (response.ok) {
                    const data = await response.json();
                    console.log(data); // Handle successful response from server
                } else {
                    console.error("Error:", response.statusText); // Handle error response from server
                }
            } catch (error) {
                console.error("Error:", error); // Handle network errors
            }
        });
            
        </script>

        <%-include("../adminpartials/admin_footer.ejs")%>