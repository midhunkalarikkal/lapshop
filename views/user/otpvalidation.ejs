<head>
    <link rel='stylesheet' href='/static/css/user_otpvalidation.css' type="text/css" />
</head>
    <%-include("../userpartials/Navbar.ejs")%>
        <div id="screen-size"></div>
        <section class="view">
        <div class="container input-box col-8 col-md-6 col-lg-12">
            <div class="form-box">
                <header class="my-4 fs-4 title text-center">Enter OTP</header>
                <form action="/otpverify" method="post">
                    <div class="d-flex">
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp" required>
                        </div>
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp2" required>
                        </div>
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp3" required>
                        </div>
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp4" required>
                        </div>
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp5" required>
                        </div>
                        <div class="input-field">
                            <input type="text" class="input" id="otp" name="otp6" required>
                        </div>
                    </div>
                    <div class="input-field">
                        <button type="submit" class="btn" id="submit">Verify otp</button>
                    </div>
                </form>
                <div class="signin mb-2">
                    <span id="resendOtp"><a href="">Resend OTP</a></span>
                    <% if(message){ %>
                        <div class="alert alert-dismissible fade show alert-<%=type%>" role="alert" id="myAlert"
                            style="padding: 5px; font-size: 14px;">
                            <strong>
                                <%= message %>
                            </strong>
                        </div>
                        <% } %>
                </div>
                </form>
            </div>
        </div>
    </section>
    <script>
        // Get all input fields
const otpInputs = document.querySelectorAll('.input');

// Attach input event listener to each input field
otpInputs.forEach((input, index) => {
    input.addEventListener('input', (event) => {
        // Automatically move to the next input field if a character is entered
        if (event.target.value.length === 1 && index < otpInputs.length - 1) {
            otpInputs[index + 1].focus();
        }
    });

    // Prevent pasting into input fields
    input.addEventListener('paste', (event) => {
        event.preventDefault();
        const clipboardData = event.clipboardData || window.clipboardData;
        const pastedText = clipboardData.getData('text');
        // Split pasted text into individual characters
        const pastedChars = pastedText.split('');
        // Assign each character to the corresponding input field
        pastedChars.forEach((char, i) => {
            if (index + i < otpInputs.length && otpInputs[index + i].value.length === 0) {
                otpInputs[index + i].value = char;
                if (index + i < otpInputs.length - 1) {
                    otpInputs[index + i + 1].focus();
                }
            }
        });
    });

    // Arrow key navigation
    input.addEventListener('keydown', (event) => {
        if (event.key === 'ArrowRight' && index < otpInputs.length - 1) {
            otpInputs[index + 1].focus(); // Focus on the next input field
        } else if (event.key === 'ArrowLeft') {
            event.preventDefault(); // Prevent default behavior of the left arrow key
            if (index > 0) {
                otpInputs[index - 1].focus(); // Focus on the previous input field
                otpInputs[index - 1].setSelectionRange(otpInputs[index - 1].value.length, otpInputs[index - 1].value.length); // Set cursor position to end of value
            }
        } else if (event.key.length === 1 && otpInputs[index].value.length > 0) {
            event.preventDefault(); // Prevent typing if field already contains a value
        }
    });
});


    </script>
    <%-include("../userpartials/footer.ejs")%>
